<html>
  <head>
    <title>CS460.org Assignment 2</title>
    <style>
      body {
        background-color:#000;
        margin: 0;
        padding: 0;
        height: 100%;
        overflow: hidden !important; 
      }
    </style>

    <script type="text/javascript" src="https://get.goXTK.com/xtk_edge.js"></script>
    <script type="text/javascript" src="loader.js"></script> 
    <script type="text/javascript">

       window.onload = function() {

       console.log('loaded.');
       const colorMap = {
      'Digit1': [1, 1, 1], // WHITE
      'Digit2': [1, 0, 0], // RED
      'Digit3': [0, 1, 0], // GREEN
      'Digit4': [0, 0, 1], // BLUE
      'Digit5': [1, 1, 0], // YELLOW
      'Digit6': [1, 0, 0.5], // PINK
      'Digit7': [0, 1, 1], // CYAN
      'Digit0': [0, 0, 0], // BLACK//EXTRA
    };
       CUBE_SIDELENGTH = 10;

       r = new X.renderer3D();
       r.init();
       let cubes = []; //Storing all the cubes created
       
       const CAMERAS = [];
       let autoCameraInterval = null;


       window.onkeypress = function(e)
        {
          if (e.code == 'KeyD') {
          c.transform.translateX(-10);
          r.render();
         }else if (e.code == 'KeyA'){
              c.transform.translateX(10);
              r.render();
          }else if (e.code == 'KeyW') {
              c.transform.translateY(10);
              r.render();
          }else if (e.code == 'KeyS') {
              c.transform.translateY(-10);
              r.render();
          }else if (e.code == 'KeyQ') {
              c.transform.translateZ(10);
              r.render();
          }else if (e.code == 'KeyE') {
              c.transform.translateZ(-10);
              r.render();
          }else if (e.code in colorMap) {
              c.color = colorMap[e.code];
          }else if (e.code == 'Space') {
              createNewCube();
          }else if (e.code == 'KeyO') {
              download();//Download function to save the picture
          }else if (e.code == 'KeyL') {
              upload("scene.json");//Upload function to load the saved picture
          }else if (e.code == 'KeyC') {
              CAMERAS.push(r.camera.view.slice()); // Clone the camera view matrix
          }
        }

        function createNewCube()
        {
          let newCube = new X.cube();
          newCube.color = c.color;
          newCube.transform.matrix = new Float32Array(c.transform.matrix);
          newCube.lengthX = newCube.lengthY = newCube.lengthZ = CUBE_SIDELENGTH;
          cubes.push(newCube);
          r.add(newCube);
          r.render();
        }
               

       c = new X.cube();
       c.color = [1, 1, 0]; // r g b
       c.lengthY += 0.1;
       c.lengthZ += 0.1;

       r.add(c);
       cubes.push(c);//Storing the initial cube to the array
       r.render();
      
      };
      
    </script>
  </head>
  <body>
  </body>
</html>