<html>
  <head>
    <title>CS460.org Assignment 2</title>
    <style>
      body {
        background-color:#000;
        margin: 0;
        padding: 0;
        height: 100%;
        overflow: hidden !important; 
      }
    </style>

    <script type="text/javascript" src="https://get.goXTK.com/xtk_edge.js">
    </script>
    <script type="text/javascript" src="loader.js"></script>
    <script type="text/javascript">
        CUBE_SIDELENGTH = 11;
        GAP = 3;
        CAMERAS = [];

      window.onload = function(){

        console.log('loaded.');

        r = new X.renderer3D();
        r.init();

        c= new X.cube();

       

        r.add(c);

        r.render();

      };
      window.onkeypress = function(e) {
        if (e.code == 'KeyD') {
          c.transform.translateX(-CUBE_SIDELENGTH - GAP);
        }
        else if(e.code == 'KeyA')
        {
          c.transform.translateX(CUBE_SIDELENGTH - GAP);
        }
         else if(e.code == 'KeyQ')
        {
          c.transform.translateY(CUBE_SIDELENGTH - GAP);
        }
         else if(e.code == 'KeyE')
        {
          c.transform.translateY(-CUBE_SIDELENGTH - GAP)
        }
         else if(e.code == 'KeyS')
        {
          c.transform.translateZ(-CUBE_SIDELENGTH - GAP);
        }
         else if(e.code == 'KeyW')
        {
          c.transform.translateZ(CUBE_SIDELENGTH - GAP);
        }
        else if (e.code == "Digit1") {
          c.color = [1, 1, 1];
        }
        else if (e.code == "Digit2") {
          c.color = [1, 0, 0];
        }
        else if (e.code == "Digit3") {
          c.color = [0, 1, 0];
        }
        else if (e.code == "Digit4") {
          c.color = [0, 0, 1];
        }
        else if (e.code == "Digit5") {
          c.color = [1, 1, 0];
        }
        else if (e.code == "Digit6") {
          c.color = [1, 0, 1];
        }
        else if (e.code == "Digit7") {
          c.color = [0, 1, 1];
        }
        else if (e.code == "Digit0") {
          c.color = [0, 0, 0];
        }
        else if (e.code == "Space"){
          new_cube = new X.cube();
          new_cube.color = c.color;
          new_cube.transform.matrix = new Float32Array(c.transform.matrix);
          new_cube.lengthX = new_cube.lengthY = new_cube.lengthZ = CUBE_SIDELENGTH;
          r.add(new_cube);
        }
        else if (e.code == "KeyO") {
          download();
        }
        else if (e.code == "KeyL") {
          upload("scene.json");
        }
        else if (e.code == "KeyC") {
          CAMERAS.push(Array.from(r.camera.view));
        }
        else if (e.code == "KeyV") {
          if (cameraCycleInterval) {
              clearInterval(cameraCycleInterval);
              cameraCycleInterval = null;
            } 
            else {
              startCameraCycle();
            }
          }
        }

        // Step 5: Declare a variable to store the camera cycle interval
        var cameraCycleInterval;

        // Step 5: Function to start automatic camera cycling
        function startCameraCycle() {
          var cameraIndex = 0;
          cameraCycleInterval = setInterval(function() {
            if (CAMERAS.length > 0) {
              r.camera.view = new Float32Array(CAMERAS[cameraIndex]);
              cameraIndex = (cameraIndex + 1) % CAMERAS.length;
            }
          }, 1000);
      }     
    </script>
  </head>
  <body>
  </body>
</html>
